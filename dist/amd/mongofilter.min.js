/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 2.0.0*/
define("mongofilter",["exports"],function(n){"use strict";function r(n,r,e,i){var u=void 0;return u=Array.isArray(r)?r[y[e]](function(r,e){return t(r,e,i)(n)}):Object.keys(r)[y[e]](function(e){return t(r[e],e,i)(n)}),"$nor"===e||"$not"===e?!u:u}function e(n,r,e){var i=!0;return i=s(r)?p.$eq(n[e],r):Array.isArray(r)?p.$in(n[e],r):t(r,"$and",e)(n)}function t(n,t,i){return t=d[t]||t||"$and",function(u){if("string"==typeof u)try{u=JSON.parse(u)}catch(o){return!1}return t in y?r(u,n,t,i):t in p?p[t](u[i],n):e(u,n,t)}}function i(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||s(n))throw new TypeError("Invalid query");var r=t(n);return r.filter=function(n){return n&&n.filter?n.filter(r):[]},r.filterItem=r,r.or=function(r){return i({$or:[n,r]})},r.and=function(r){return i({$and:[n,r]})},r}Object.defineProperty(n,"__esModule",{value:!0}),n.mongofilter=i;var u=/(^|[^%])%(?!%)/g,o=/(^|[^\\])(_+)/g,f=function(n,r,e){return r+new Array(e.length+1).join(".")},c=function(n){return new RegExp("^"+n.replace(u,"$1.*").replace(o,f)+"$")},$=/^\/([\s\S]*)\/([igm]*)$/,a=/^(string|number|boolean)$/,l=function(n){if("string"==typeof n){var r=void 0;n.replace($,function(e,t,i){n=t,r=i}),n=r?new RegExp(n,r):new RegExp(n)}return n},s=function(n){return null==n||a.test(typeof n)},g=function(n){return null!=n},p={$gt:function(n,r){return n>r},$gte:function(n,r){return n>=r},$lt:function(n,r){return r>n},$lte:function(n,r){return r>=n},$eq:function(n,r){return n===r},$ne:function(n,r){return n!==r},$regex:function(n,r){return g(n)&&l(r).test(n)},$like:function(n,r){return g(n)&&c(r).test(n)},$nlike:function(n,r){return!p.$like(n,r)},$in:function(n,r){return!!~r.indexOf(n)},$nin:function(n,r){return!p.$in(n,r)}},y={$or:"some",$nor:"every",$and:"every",$not:"some"},d={$e:"$eq",$neq:"$ne"};n.aliases=d,n.comparators=p});
