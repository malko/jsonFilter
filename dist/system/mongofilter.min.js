/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 2.0.0*/
System.register("mongofilter",[],function(n){"use strict";function r(n,r,t,u){var i=void 0;return i=Array.isArray(r)?r[p[t]](function(r,t){return e(r,t,u)(n)}):Object.keys(r)[p[t]](function(t){return e(r[t],t,u)(n)}),"$nor"===t||"$not"===t?!i:i}function t(n,r,t){var u=!0;return u=l(r)?y.$eq(n[t],r):Array.isArray(r)?y.$in(n[t],r):e(r,"$and",t)(n)}function e(n,e,u){return e=v[e]||e||"$and",function(i){if("string"==typeof i)try{i=JSON.parse(i)}catch(o){return!1}return e in p?r(i,n,e,u):e in y?y[e](i[u],n):t(i,n,e)}}function u(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||l(n))throw new TypeError("Invalid query");var r=e(n);return r.filter=function(n){return n&&n.filter?n.filter(r):[]},r.filterItem=r,r.or=function(r){return u({$or:[n,r]})},r.and=function(r){return u({$and:[n,r]})},r}var i,o,f,c,$,a,s,l,g,y,p,v;return n("mongofilter",u),{setters:[],execute:function(){i=/(^|[^%])%(?!%)/g,o=/(^|[^\\])(_+)/g,f=function(n,r,t){return r+new Array(t.length+1).join(".")},c=function(n){return new RegExp("^"+n.replace(i,"$1.*").replace(o,f)+"$")},$=/^\/([\s\S]*)\/([igm]*)$/,a=/^(string|number|boolean)$/,s=function(n){if("string"==typeof n){var r=void 0;n.replace($,function(t,e,u){n=e,r=u}),n=r?new RegExp(n,r):new RegExp(n)}return n},l=function(n){return null==n||a.test(typeof n)},g=function(n){return null!=n},y={$gt:function(n,r){return n>r},$gte:function(n,r){return n>=r},$lt:function(n,r){return r>n},$lte:function(n,r){return r>=n},$eq:function(n,r){return n===r},$ne:function(n,r){return n!==r},$regex:function(n,r){return g(n)&&s(r).test(n)},$like:function(n,r){return g(n)&&c(r).test(n)},$nlike:function(n,r){return!y.$like(n,r)},$in:function(n,r){return!!~r.indexOf(n)},$nin:function(n,r){return!y.$in(n,r)}},p={$or:"some",$nor:"every",$and:"every",$not:"some"},v={$e:"$eq",$neq:"$ne"},n("aliases",v),n("comparators",y)}}});
