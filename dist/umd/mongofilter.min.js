/*https://github.com/malko/mongofilter brought to you under MIT licence by Jonathan Gotti version: 1.0.1*/
!function(n,e){if("function"==typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var r={exports:{}};e(r.exports,r),n.mongofilter=r.exports}}(this,function(n,e){"use strict";function r(n,e,r,t){var u=Array.isArray(e)?e[g[r]](function(e,r){return i(e,r,t)(n)}):Object.keys(e)[g[r]](function(r){return i(e[r],r,t)(n)});return"$nor"===r?!u:u}function t(n,e,r){return l(e)?d.$eq(n[r],e):Array.isArray(e)?d.$in(n[r],e):i(e,"$and",r)(n)}function i(n,e,i){var u=void 0===arguments[1]?"$and":arguments[1];return function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(o){return!1}return u=y[u]||u,u in g?r(e,n,u,i):u in d?d[u](e[i],n):t(e,n,u)}}function u(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||l(n))throw new TypeError("Invalid query");var e=i(n);return e.filter=function(n){return n&&n.filter?n.filter(e):[]},e}e.exports=u;var o=/(^|[^%])%(?!%)/g,f=/(^|[^\\])(_+)/g,c=function(n,e,r){return e+new Array(r.length+1).join(".")},s=function(n){return new RegExp("^"+n.replace(o,"$1.*").replace(f,c)+"$")},a=/^\/([\s\S]*)\/([igm]*)$/,$=function(n){return"string"==typeof n&&!function(){var e=void 0;n.replace(a,function(r,t,i){n=t,e=i}),n=e?new RegExp(n,e):new RegExp(n)}(),n},p=/^(string|number|boolean)$/,l=function(n){return null==n||p.test(typeof n)},d={$gt:function(n,e){return n>e},$gte:function(n,e){return n>=e},$lt:function(n,e){return e>n},$lte:function(n,e){return e>=n},$eq:function(n,e){return n===e},$neq:function(n,e){return n!==e},$regex:function(n,e){return $(e).test(n)},$like:function(n,e){return s(e).test(n)},$nlike:function(n,e){return!s(e).test(n)},$in:function(n,e){return!!~e.indexOf(n)},$nin:function(n,e){return!~e.indexOf(n)}},g={$or:"some",$nor:"some",$and:"every"},y={$e:"$eq",$ne:"$neq"};u.alias=y,u.comparators=d});
