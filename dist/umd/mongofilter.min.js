/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 2.0.0*/
!function(n,e){if("function"==typeof define&&define.amd)define("mongofilter",["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var r={exports:{}};e(r.exports),n.mongofilter=r.exports}}(this,function(n){"use strict";function e(n,e,r,i){var o=void 0;return o=Array.isArray(e)?e[d[r]](function(e,r){return t(e,r,i)(n)}):Object.keys(e)[d[r]](function(r){return t(e[r],r,i)(n)}),"$nor"===r||"$not"===r?!o:o}function r(n,e,r){var i=!0;return i=l(e)?y.$eq(n[r],e):Array.isArray(e)?y.$in(n[r],e):t(e,"$and",r)(n)}function t(n,t,i){return t=g[t]||t||"$and",function(o){if("string"==typeof o)try{o=JSON.parse(o)}catch(u){return!1}return t in d?e(o,n,t,i):t in y?y[t](o[i],n):r(o,n,t)}}function i(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||l(n))throw new TypeError("Invalid query");var e=t(n);return e.filter=function(n){return n&&n.filter?n.filter(e):[]},e.filterItem=e,e.or=function(e){return i({$or:[n,e]})},e.and=function(e){return i({$and:[n,e]})},e}Object.defineProperty(n,"__esModule",{value:!0}),n.mongofilter=i;var o=/(^|[^%])%(?!%)/g,u=/(^|[^\\])(_+)/g,f=function(n,e,r){return e+new Array(r.length+1).join(".")},c=function(n){return new RegExp("^"+n.replace(o,"$1.*").replace(u,f)+"$")},$=/^\/([\s\S]*)\/([igm]*)$/,a=/^(string|number|boolean)$/,s=function(n){if("string"==typeof n){var e=void 0;n.replace($,function(r,t,i){n=t,e=i}),n=e?new RegExp(n,e):new RegExp(n)}return n},l=function(n){return null==n||a.test(typeof n)},p=function(n){return null!=n},y={$gt:function(n,e){return n>e},$gte:function(n,e){return n>=e},$lt:function(n,e){return e>n},$lte:function(n,e){return e>=n},$eq:function(n,e){return n===e},$ne:function(n,e){return n!==e},$regex:function(n,e){return p(n)&&s(e).test(n)},$like:function(n,e){return p(n)&&c(e).test(n)},$nlike:function(n,e){return!y.$like(n,e)},$in:function(n,e){return!!~e.indexOf(n)},$nin:function(n,e){return!y.$in(n,e)}},d={$or:"some",$nor:"every",$and:"every",$not:"some"},g={$e:"$eq",$neq:"$ne"};n.aliases=g,n.comparators=y});
